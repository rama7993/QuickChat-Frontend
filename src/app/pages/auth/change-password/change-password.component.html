<div class="reset">
  <div class="reset__header">
    <h1 class="reset__title">Quick Chat</h1>
  </div>

  <div class="reset__box">
    <h2 class="reset__heading">Change Password</h2>
    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
      <div class="reset__form-group">
        <label for="oldPassword">Current Password</label>
        <div class="reset__password-wrapper">
          <input
            formControlName="oldPassword"
            [type]="showPassword ? 'text' : 'password'"
            id="oldPassword"
            class="reset__input"
            [class.error]="oldPassword?.invalid && oldPassword?.touched"
          />
          <i
            class="pi"
            [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"
            (click)="showPassword = !showPassword"
          ></i>
        </div>
        <div
          *ngIf="oldPassword?.invalid && oldPassword?.touched"
          class="error-message"
        >
          Current password is required
        </div>
      </div>

      <div class="reset__form-group">
        <label for="newPassword">New Password</label>
        <div class="reset__password-wrapper">
          <input
            formControlName="newPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="newPassword"
            class="reset__input"
            [class.error]="newPassword?.invalid && newPassword?.touched"
          />
          <i
            class="pi"
            [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"
            (click)="showConfirmPassword = !showConfirmPassword"
          ></i>
        </div>
        <div
          *ngIf="newPassword?.invalid && newPassword?.touched"
          class="error-message"
        >
          <span *ngIf="newPassword?.errors?.['required']"
            >New password is required</span
          >
          <span *ngIf="newPassword?.errors?.['minlength']"
            >Password must be at least 6 characters</span
          >
        </div>
      </div>

      <div class="reset__form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <div class="reset__password-wrapper">
          <input
            formControlName="confirmPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            class="reset__input"
            [class.error]="confirmPassword?.invalid && confirmPassword?.touched"
          />
          <i
            class="pi"
            [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"
            (click)="showConfirmPassword = !showConfirmPassword"
          ></i>
        </div>
        <div
          *ngIf="confirmPassword?.invalid && confirmPassword?.touched"
          class="error-message"
        >
          <span *ngIf="confirmPassword?.errors?.['required']"
            >Please confirm your password</span
          >
          <span *ngIf="confirmPassword?.errors?.['passwordMismatch']"
            >Passwords do not match</span
          >
        </div>
      </div>

      <div class="reset__actions">
        <button
          type="submit"
          class="btn"
          [disabled]="isSubmitting || changePasswordForm.invalid"
        >
          {{ isSubmitting ? "Changing..." : "Change Password" }}
        </button>
      </div>

      <div class="reset__login">
        <a [routerLink]="['/profile']" class="reset__link">Back to Profile</a>
      </div>
    </form>
  </div>
</div>
