<div class="reset-password auth-page">
  <header class="reset-password__header auth-header">
    <div class="reset-password__logo auth-logo">
      <div class="auth-logo__icon">
        <i class="pi pi-comments"></i>
      </div>
      <h1 class="reset-password__title auth-title">
        Quick<span class="auth-title__accent">Chat</span>
      </h1>
    </div>
    <p class="reset-password__tagline auth-tagline">Set a new password</p>
  </header>

  <section class="reset-password__box auth-card">
    <div class="reset-password__box-header auth-card-header">
      <h2 class="reset-password__heading auth-heading">Reset Password</h2>
      <p class="reset-password__subtext auth-subtext">
        Enter your new password below.
      </p>
    </div>

    <form
      [formGroup]="resetPasswordForm"
      (ngSubmit)="onSubmit()"
      class="reset-password__form auth-form"
    >
      <div class="reset-password__form-group auth-form-group">
        <label for="password" class="reset-password__label auth-label">
          New Password <span class="auth-label--required">*</span>
        </label>
        <div class="reset-password__password-wrapper auth-password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            class="reset-password__input auth-input"
            formControlName="password"
            [ngClass]="{ 'ng-invalid ng-touched': isInvalid('password') }"
            placeholder="Enter new password"
          />
          <i
            class="pi password-toggle"
            [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"
            (click)="showPassword = !showPassword"
          ></i>
        </div>
        <div
          class="reset-password__error auth-error"
          *ngIf="password.touched && password.invalid"
        >
          <small *ngIf="password.errors?.['required']"
            >Password is required</small
          >
          <small *ngIf="password.errors?.['minlength']"
            >Password must be at least 8 characters</small
          >
        </div>
      </div>

      <div class="reset-password__form-group auth-form-group">
        <label for="confirmPassword" class="reset-password__label auth-label">
          Confirm Password <span class="auth-label--required">*</span>
        </label>
        <div class="reset-password__password-wrapper auth-password-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            class="reset-password__input auth-input"
            formControlName="confirmPassword"
            [ngClass]="{
              'ng-invalid ng-touched': isInvalid('confirmPassword')
            }"
            placeholder="Confirm new password"
          />
          <i
            class="pi password-toggle"
            [ngClass]="showConfirmPassword ? 'pi-eye-slash' : 'pi-eye'"
            (click)="showConfirmPassword = !showConfirmPassword"
          ></i>
        </div>
        <div
          class="reset-password__error auth-error"
          *ngIf="confirmPassword.touched && confirmPassword.invalid"
        >
          <small *ngIf="confirmPassword.errors?.['required']"
            >Please confirm your password</small
          >
          <small *ngIf="confirmPassword.errors?.['passwordMismatch']"
            >Passwords do not match</small
          >
        </div>
      </div>

      <div class="reset-password__actions auth-actions">
        <button
          type="submit"
          class="reset-password__button auth-button"
          [disabled]="isSubmitting || resetPasswordForm.invalid"
        >
          <i
            [class]="isSubmitting ? 'pi pi-spin pi-spinner' : 'pi pi-check'"
          ></i>
          {{ isSubmitting ? "Resetting..." : "Reset Password" }}
        </button>
      </div>
    </form>

    <div class="reset-password__back auth-link">
      <a [routerLink]="['/login']">
        <i class="pi pi-arrow-left"></i> Back to Login
      </a>
    </div>
  </section>
</div>
