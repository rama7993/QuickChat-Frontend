<div class="color-picker">
  <div class="color-picker-header">
    <h4 class="color-picker-label">{{ label }}</h4>
    <div
      class="current-color-display"
      [style.background-color]="selectedColor()"
    ></div>
  </div>

  <div class="color-presets">
    @for (preset of getCurrentPresets(); track preset.name) {
    <div class="preset-group">
      <h5 class="preset-name">{{ preset.name }}</h5>
      <div class="color-grid">
        @for (color of preset.colors; track color) {
        <button
          class="color-swatch"
          [style.background-color]="color"
          [class.selected]="isColorSelected(color)"
          (click)="selectPresetColor(color)"
          [title]="color"
        >
          @if (isColorSelected(color)) {
          <i class="pi pi-check color-check"></i>
          }
        </button>
        }
      </div>
    </div>
    }

    <!-- Custom Color Picker -->
    <div class="custom-color-section">
      <div class="custom-color-header">
        <h5 class="preset-name">Custom Color</h5>
        <button
          class="custom-toggle-btn"
          [class.active]="showCustomPicker()"
          (click)="toggleCustomPicker()"
        >
          <i class="pi pi-palette"></i>
        </button>
      </div>

      @if (showCustomPicker()) {
      <div class="custom-color-picker">
        <input
          type="color"
          [value]="customColor()"
          (input)="onColorInput($event)"
          class="color-input"
        />
        <div class="color-input-wrapper">
          <input
            type="text"
            [value]="customColor()"
            (input)="onTextInput($event)"
            class="color-text-input"
            placeholder="#a855f7"
          />
        </div>
      </div>
      }
    </div>
  </div>
</div>
